<ion-content>
  <div class="product" *ngIf="(isLoading$ | async) === false" test-id="product">
    <div *ngIf="product$ | async; let product">
      <section class="images">
        <ion-slides pager="true">
          <ion-slide *ngFor="let image of product.images" test-id="banner">
            <img [src]="image" object-fit="cover" />
          </ion-slide>
        </ion-slides>
      </section>

      <section class="header">
        <div class="title">
          <ion-text>{{product.title}}</ion-text>
        </div>
        <div class="price">
          <ion-text>{{product.price | currency: "R$ "}}</ion-text>
          <ion-text class="discount">
            {{product.priceWithDiscount | currency: "R$ "}}
          </ion-text>
        </div>
      </section>

      <section class="options" *ngIf="product.colors?.length" test-id="product-colors">
        <div class="title">
          <ion-text>Cor:</ion-text>
        </div>
        <ion-icon name="ellipse" *ngFor="let color of product.colors"
          [ngStyle]="{'color': color | color}" (click)="setColor(color)"
          [ngClass]="color === selectedColor ? 'selected' : ''">
        </ion-icon>
      </section>

      <section class="options" *ngIf="product.sizes?.length" test-id="product-sizes">
        <div class="title">
          <ion-text>Tamanho:</ion-text>
        </div>
        <div>
          <ion-segment mode="ios">
            <ion-segment-button *ngFor="let size of product.sizes" [value]="size">
              <ion-label>{{size}}</ion-label>
            </ion-segment-button>
          </ion-segment>
        </div>
      </section>

      <section class="options" *ngIf="product.description" test-id="product-description">
        <div class="title">
          <ion-text>Descri√ßao:</ion-text>
        </div>
        <div [innerHTML]="product.description" class="description"></div>
      </section>
    </div>
  </div>

  <div test-id="loader" *ngIf="isLoading$ | async">
    <app-product-loader></app-product-loader>
  </div>
</ion-content>

<ion-footer *ngIf="(isLoading$ | async) === false">
  <ion-toolbar color="primary">
    <ion-title align="middle">Adicionar ao carrinho</ion-title>
  </ion-toolbar>
</ion-footer>